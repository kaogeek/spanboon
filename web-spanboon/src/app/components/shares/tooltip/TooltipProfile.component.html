<!--
    @license Spanboon Platform v0.1
    (c) 2020-2021 KaoGeek. http://kaogeek.dev
    License: MIT. https://opensource.org/licenses/MIT
    Author:  p-nattawadee <nattawdee.l@absolute.co.th>, Chanachai-Pansailom <chanachai.p@absolute.co.th>, Americaso <treerayuth.o@absolute.co.th>
-->

<div class="arrow-top"></div>
<div (mouseout)="tooltipClose($event)">

    <!-- <div> -->
    <div class="tooltip-body">
        <div class="detail" style="pointer-events: none;">
            <ng-container
                *ngIf="data.owner.imagebase64 !== null && data.owner.imagebase64 !== undefined && data.owner.imagebase64 !== '' || data.owner.imageBase64 !== null && data.owner.imageBase64 !== undefined && data.owner.imageBase64 !== ''; else elseTemplateImg">
                <img class="profile" src="{{data.owner.imagebase64 || data.owner.imageBase64}}" alt="profile">

            </ng-container>
            <ng-template #elseTemplateImg>
                <img class="profile" *ngIf="!data.owner.imageURL" src="../../../../assets/img/profile.svg"
                    alt="profile">
                <img class="profile" *ngIf="data.owner.imageURL" src="{{apiBaseURL+data.owner.imageURL+'/image'}}"
                    alt="profile">
            </ng-template>

            <div class="right">
                <ng-container *ngIf="data.owner.type === 'PAGE'; else elseTemplateLink">
                    <ng-container
                        *ngIf="data.owner.uniqueId && data.owner.uniqueId !== null && data.owner.uniqueId !== undefined && data.owner.uniqueId !== ''; else elseTemplateUid1">
                        <a class="name" href="page/{{data.owner.uniqueId}}">
                            {{data.owner.name}}
                        </a>
                    </ng-container>
                    <ng-template #elseTemplateUid1>
                        <a class="name" href="page/{{data.owner.id}}">
                            {{data.owner.name}}
                        </a>
                    </ng-template>
                </ng-container>
                <ng-template #elseTemplateLink>
                    <ng-container
                        *ngIf="data.owner.uniqueId && data.owner.uniqueId !== null && data.owner.uniqueId !== undefined && data.owner.uniqueId !== ''; else elseTemplateUid2">
                        <a class="name" href="profile/{{data.owner.uniqueId}}">
                            {{data.owner.name}}
                        </a>
                    </ng-container>
                    <ng-template #elseTemplateUid2>
                        <a class="name" href="profile/{{data.owner.id}}">
                            {{data.owner.name}}
                        </a>
                    </ng-template>
                </ng-template>
                <div class="sub-name">
                    @{{data.owner.type}}
                </div>
                <ng-container *ngIf="data.owner.type === 'PAGE'; else elseTemplatePageOrUser">
                    <div class="category">
                        <div class="text-category">
                            เพจ:
                        </div>
                        <svg height="14.033" viewBox="0 0 17.305 14.033" width="17.305"
                            xmlns="http://www.w3.org/2000/svg" class="icon">
                            <g id="folder" transform="translate(0 -48.403)">
                                <g data-name="Group 1348" id="Group_1348" transform="translate(0 48.403)">
                                    <g data-name="Group 1347" id="Group_1347" transform="translate(0 0)">
                                        <path
                                            d="M13.642,49.665H4.716a.5.5,0,0,1-.5-.5v-.251a.51.51,0,0,0-.51-.51H1.021A1.021,1.021,0,0,0,0,49.424v8.59l1.31-6.373a.5.5,0,0,1,.49-.4H14.663v-.556A1.021,1.021,0,0,0,13.642,49.665Z"
                                            data-name="Path 3227" fill="#e65857" id="Path_3227"
                                            transform="translate(0 -48.403)"></path>
                                    </g>
                                </g>
                                <g data-name="Group 1350" id="Group_1350" transform="translate(0.228 52.243)">
                                    <g data-name="Group 1349" id="Group_1349" transform="translate(0 0)">
                                        <path
                                            d="M22.8,162.01H8.726l-1.97,9.584a.507.507,0,0,0,.5.609H21.9a1.021,1.021,0,0,0,1.015-.909l.9-8.151A1.021,1.021,0,0,0,22.8,162.01Z"
                                            data-name="Path 3228" fill="#e65857" id="Path_3228"
                                            transform="translate(-6.746 -162.01)"></path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        <div class="text-category">
                            {{data.owner.categoryName}}
                        </div>
                    </div>
                    <div class="follow">
                        <div class="follow-left">
                            <span class="fol-span">ผู้ติดตาม</span>
                            <svg class="new-cards-status" id="user_3_" data-name="user (3)"
                                xmlns="http://www.w3.org/2000/svg" width="30.332" height="36.356"
                                viewBox="0 0 30.332 36.356">
                                <path id="Path_136" data-name="Path 136"
                                    d="M95.788,17.513a8.472,8.472,0,0,0,6.191-2.565,8.473,8.473,0,0,0,2.565-6.191,8.474,8.474,0,0,0-2.565-6.191,8.754,8.754,0,0,0-12.382,0,8.473,8.473,0,0,0-2.565,6.191A8.473,8.473,0,0,0,89.6,14.948,8.474,8.474,0,0,0,95.788,17.513Zm0,0"
                                    transform="translate(-80.852 0)" class="svg-color-gray" />
                                <path id="Path_137" data-name="Path 137"
                                    d="M30.258,257.711a21.629,21.629,0,0,0-.295-2.3,18.1,18.1,0,0,0-.565-2.31,11.407,11.407,0,0,0-.949-2.154,8.126,8.126,0,0,0-1.432-1.866,6.312,6.312,0,0,0-2.057-1.292,7.107,7.107,0,0,0-2.626-.475,2.665,2.665,0,0,0-1.423.6c-.427.278-.926.6-1.483.956a8.5,8.5,0,0,1-1.918.845,7.449,7.449,0,0,1-4.693,0,8.472,8.472,0,0,1-1.917-.845c-.552-.353-1.051-.674-1.484-.956a2.661,2.661,0,0,0-1.423-.6,7.1,7.1,0,0,0-2.625.476,6.308,6.308,0,0,0-2.057,1.292,8.129,8.129,0,0,0-1.431,1.866A11.431,11.431,0,0,0,.932,253.1a18.144,18.144,0,0,0-.565,2.309,21.553,21.553,0,0,0-.295,2.3c-.048.7-.073,1.418-.073,2.147a6.037,6.037,0,0,0,1.793,4.567,6.454,6.454,0,0,0,4.62,1.685H23.918a6.453,6.453,0,0,0,4.62-1.685,6.034,6.034,0,0,0,1.793-4.568c0-.733-.025-1.455-.074-2.147Zm0,0"
                                    transform="translate(0 -229.755)" class="svg-color-gray" />
                            </svg>
                            <span class="count">{{data.followUserCount ? data.followUserCount : data.owner.followers}}
                                คน</span>
                        </div>
                        <span style="font-size: 24px; margin-right: 7pt;">•</span>
                        <div class="follow-right">
                            <span class="fol-span">ผู้บริจาค</span>
                            <span class="count">{{fulfill}} คน</span>
                        </div>
                    </div>
                    <div class="user-pro-sub">
                        <ng-container *ngIf="data && data.followUsers !== undefined">
                            <ng-container *ngIf="data.followUsers.length > 2;">
                                <div class="img-user" style="background-color: rgb(253, 84, 90,0.8);">
                                    <span>+{{data.followUsers.length-2}}</span>
                                </div>
                            </ng-container>
                            <ng-container *ngFor="let item of data.followUsers; let index = index">
                                <a class="img-user" target="_blank"
                                    href="profile/{{mainProfileLink}}{{(item.uniqueId === null || item.uniqueId === undefined || item.uniqueId === '') ? item.id : item.uniqueId}}"
                                    matTooltip="{{item.firstName}}" *ngIf="index < 2"
                                    [ngStyle]="{'background-color': !item.avatar ? '#FD545A' : unset}">
                                    <ng-container *ngIf="item.avatar; else elseAvatar">
                                        <img *ngIf="item.avatar" [src]="item.avatar">
                                    </ng-container>
                                    <ng-template #elseAvatar>
                                        <span>{{item.displayName | slice: 0:1 }}</span>
                                    </ng-template>
                                </a>
                            </ng-container>
                        </ng-container>
                    </div>
                </ng-container>
                <ng-template #elseTemplatePageOrUser>
                    <div class="user-detail">
                        <div class="user-birthday">
                            เกิดวันที่ {{birthday}}
                        </div>
                        <div class="user-follow">
                            มีผู้ติดตามร่วมกัน
                            <svg class="follow-status" id="user_3_" data-name="user (3)"
                                xmlns="http://www.w3.org/2000/svg" width="30.332" height="36.356"
                                viewBox="0 0 30.332 36.356">
                                <path id="Path_136" data-name="Path 136"
                                    d="M95.788,17.513a8.472,8.472,0,0,0,6.191-2.565,8.473,8.473,0,0,0,2.565-6.191,8.474,8.474,0,0,0-2.565-6.191,8.754,8.754,0,0,0-12.382,0,8.473,8.473,0,0,0-2.565,6.191A8.473,8.473,0,0,0,89.6,14.948,8.474,8.474,0,0,0,95.788,17.513Zm0,0"
                                    transform="translate(-80.852 0)" class="svg-color-gray" />
                                <path id="Path_137" data-name="Path 137"
                                    d="M30.258,257.711a21.629,21.629,0,0,0-.295-2.3,18.1,18.1,0,0,0-.565-2.31,11.407,11.407,0,0,0-.949-2.154,8.126,8.126,0,0,0-1.432-1.866,6.312,6.312,0,0,0-2.057-1.292,7.107,7.107,0,0,0-2.626-.475,2.665,2.665,0,0,0-1.423.6c-.427.278-.926.6-1.483.956a8.5,8.5,0,0,1-1.918.845,7.449,7.449,0,0,1-4.693,0,8.472,8.472,0,0,1-1.917-.845c-.552-.353-1.051-.674-1.484-.956a2.661,2.661,0,0,0-1.423-.6,7.1,7.1,0,0,0-2.625.476,6.308,6.308,0,0,0-2.057,1.292,8.129,8.129,0,0,0-1.431,1.866A11.431,11.431,0,0,0,.932,253.1a18.144,18.144,0,0,0-.565,2.309,21.553,21.553,0,0,0-.295,2.3c-.048.7-.073,1.418-.073,2.147a6.037,6.037,0,0,0,1.793,4.567,6.454,6.454,0,0,0,4.62,1.685H23.918a6.453,6.453,0,0,0,4.62-1.685,6.034,6.034,0,0,0,1.793-4.568c0-.733-.025-1.455-.074-2.147Zm0,0"
                                    transform="translate(0 -229.755)" class="svg-color-gray" />
                            </svg>
                            <span>{{data.followUserCount}} คน</span>
                        </div>
                    </div>
                </ng-template>
            </div>
        </div>
        <div class="tooltip-bottom">
            <button-follow [bgColor]="'#FFFFFF'" [text]="data.owner && data.owner.isFollow ? 'กำลังติดตาม' : 'ติดตาม'"
                (click)="clickFollow(data.owner)" [class.active]="data.owner && data.owner.isFollow">
            </button-follow>
            <div class="tooltip-bottom-right">
                <button (click)="clickMore(data.owner)" mat-stroked-button class="but-send">
                    <span class="material-icons">
                        send
                    </span>
                </button>
                <!-- <button (click)="clickMore(data.owner)" mat-stroked-button class="but-send tool-dropdow" [matMenuTriggerFor]="menu"> -->
                <button (click)="clickSend(data.owner)" mat-stroked-button class="but-send tool-dropdow">
                    <span class="material-icons">
                        more_horiz
                    </span>
                </button>
                <mat-menu class="tool-sel" #menu="matMenu" [hasBackdrop]="'false'">
                    <button mat-menu-item *ngFor="let link of Links; let i = index">
                        <span class="material-icons-outlined icon">
                            {{link.icon}}
                        </span>
                        <span class="text-label">
                            {{link.label}}
                        </span>
                    </button>
                </mat-menu>
            </div>
        </div>
    </div>
</div>

<div class="arrow-bottom"></div>
<!-- <div class="back-drop-tool"></div> -->