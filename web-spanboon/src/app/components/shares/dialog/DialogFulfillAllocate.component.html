<!--
    @license Spanboon Platform v0.1
    (c) 2020-2021 KaoGeek. http://kaogeek.dev
    License: MIT. https://opensource.org/licenses/MIT
    Author:  p-nattawadee <nattawdee.l@absolute.co.th>, Chanachai-Pansailom <chanachai.p@absolute.co.th>, Americaso <treerayuth.o@absolute.co.th>
-->

<div class="fulfill-allocate">
    <div class="fulfill-allocate-box">
        <div class="box-hrader">
            <div class="left">
                <span *ngIf="indexWizardPage === 0">
                    จัดการรายการเติมเต็ม
                </span>
                <span *ngIf="indexWizardPage === 1">
                    เลือกรายการที่ต้องการจัดสรร
                </span>
                <div *ngIf="indexWizardPage === 2" class="list-item-icon">
                    <svg id="Group_2322" data-name="Group 2322" xmlns="http://www.w3.org/2000/svg" width="35"
                        height="35" viewBox="0 0 22.32 20" class="icon">
                        <g id="Group_2202" data-name="Group 2202" transform="translate(0 0)">
                            <g id="Group_2201" data-name="Group 2201" transform="translate(8.723 8.292)">
                                <path id="Path_3477" data-name="Path 3477"
                                    d="M306.368,183.246a3.717,3.717,0,0,1,3.7,3.7c0,3.735-6.8,7.434-6.8,7.434s-6.8-3.753-6.8-7.434a3.7,3.7,0,0,1,3.7-3.7h0a3.662,3.662,0,0,1,3.1,1.668A3.7,3.7,0,0,1,306.368,183.246Z"
                                    transform="translate(-296.468 -183.246)" fill="#474747" />
                            </g>
                            <path id="Path_3478" data-name="Path 3478"
                                d="M273.562,168.545h-5.473a1.268,1.268,0,0,1-1.267-1.267V156.424a1.268,1.268,0,0,1,1.267-1.267h10.855a1.268,1.268,0,0,1,1.267,1.267v4.936c.027.039.056.077.082.117a4.8,4.8,0,0,1,1.794-1.621v-3.432a3.146,3.146,0,0,0-3.142-3.143H268.088a3.146,3.146,0,0,0-3.142,3.143v10.855a3.146,3.146,0,0,0,3.142,3.142h7.4A19.37,19.37,0,0,1,273.562,168.545Z"
                                transform="translate(-264.946 -153.281)" fill="#474747" />
                        </g>
                        <rect id="Rectangle_899" data-name="Rectangle 899" width="0.929" height="1.649" rx="0.465"
                            transform="translate(3.238 3.909)" fill="#474747" />
                        <rect id="Rectangle_900" data-name="Rectangle 900" width="0.929" height="2.223" rx="0.465"
                            transform="translate(4.811 3.335)" fill="#474747" />
                        <rect id="Rectangle_901" data-name="Rectangle 901" width="0.929" height="1.649" rx="0.465"
                            transform="translate(6.392 3.909)" fill="#474747" />
                    </svg>
                </div>
                <span *ngIf="indexWizardPage === 2">
                    {{indexItemName()}}
                </span>
                <span style="color: #84b572;" *ngIf="indexWizardPage === 2">
                    {{indexItemAllocateQuantity()}}
                </span>
                <span *ngIf="indexWizardPage === 2">
                    /
                    {{indexItemQuantity()}}
                    {{indexItemUnit()}}
                </span>
            </div>
            <div class="right">
                <div class="wizard-step">
                    <span class="step" [class.active]="indexWizardPage === i"
                        *ngFor="let item of getQuantity(wizardConfig.quantity);let i = index"
                        (click)="indexWizardPage = i"></span>
                </div>
                <mat-icon class="close">close</mat-icon>
            </div>
        </div>

        <div class="box-body">

            <div *ngIf="indexWizardPage === 0" class="box-list">
                <div class="box-list-hrader">
                    <span>
                        เลือกวิธีการจัดสรร
                    </span>
                </div>
                <div class="box-list-body">
                    <div *ngFor="let item of listItem" (click)="checkedClick(item)" class="list-item">
                        <div class="list-item-icon">
                            <svg id="Group_2322" data-name="Group 2322" xmlns="http://www.w3.org/2000/svg" width="35"
                                height="35" viewBox="0 0 22.32 20" class="icon">
                                <g id="Group_2202" data-name="Group 2202" transform="translate(0 0)">
                                    <g id="Group_2201" data-name="Group 2201" transform="translate(8.723 8.292)">
                                        <path id="Path_3477" data-name="Path 3477"
                                            d="M306.368,183.246a3.717,3.717,0,0,1,3.7,3.7c0,3.735-6.8,7.434-6.8,7.434s-6.8-3.753-6.8-7.434a3.7,3.7,0,0,1,3.7-3.7h0a3.662,3.662,0,0,1,3.1,1.668A3.7,3.7,0,0,1,306.368,183.246Z"
                                            transform="translate(-296.468 -183.246)" fill="#474747" />
                                    </g>
                                    <path id="Path_3478" data-name="Path 3478"
                                        d="M273.562,168.545h-5.473a1.268,1.268,0,0,1-1.267-1.267V156.424a1.268,1.268,0,0,1,1.267-1.267h10.855a1.268,1.268,0,0,1,1.267,1.267v4.936c.027.039.056.077.082.117a4.8,4.8,0,0,1,1.794-1.621v-3.432a3.146,3.146,0,0,0-3.142-3.143H268.088a3.146,3.146,0,0,0-3.142,3.143v10.855a3.146,3.146,0,0,0,3.142,3.142h7.4A19.37,19.37,0,0,1,273.562,168.545Z"
                                        transform="translate(-264.946 -153.281)" fill="#474747" />
                                </g>
                                <rect id="Rectangle_899" data-name="Rectangle 899" width="0.929" height="1.649"
                                    rx="0.465" transform="translate(3.238 3.909)" fill="#474747" />
                                <rect id="Rectangle_900" data-name="Rectangle 900" width="0.929" height="2.223"
                                    rx="0.465" transform="translate(4.811 3.335)" fill="#474747" />
                                <rect id="Rectangle_901" data-name="Rectangle 901" width="0.929" height="1.649"
                                    rx="0.465" transform="translate(6.392 3.909)" fill="#474747" />
                            </svg>
                        </div>
                        <div class="list-item-detail">
                            <span class="text-label">{{item.label}}</span>
                            <span class="text-detail">{{item.detail}}</span>
                        </div>
                        <div class="list-item-forward">
                            <mat-icon class="pb_arrow_forward">arrow_forward</mat-icon>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="indexWizardPage === 1" class="box-list-item">
                <div class="box-list-item-hrader">
                    <div (click)="back()" class="list-item-Back">
                        <span>ย้อนกลับ</span>
                    </div>
                    <div (click)="next()" [class.active]="selectNeedItem.length > 0" class="list-item-Next">
                        <span>ถัดไป</span>
                    </div>
                </div>
                <div class="box-list-item-body">
                    <div (click)="selectItem(i)" *ngFor="let item of listItemNeed;let i = index" class="item">
                        <svg *ngIf="item.isSelect" style="position: absolute;top: 10px;right: 10px;" height="15px"
                            viewBox="0 -46 417.81333 417" width="15px" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="m159.988281 318.582031c-3.988281 4.011719-9.429687 6.25-15.082031 6.25s-11.09375-2.238281-15.082031-6.25l-120.449219-120.46875c-12.5-12.5-12.5-32.769531 0-45.246093l15.082031-15.085938c12.503907-12.5 32.75-12.5 45.25 0l75.199219 75.203125 203.199219-203.203125c12.503906-12.5 32.769531-12.5 45.25 0l15.082031 15.085938c12.5 12.5 12.5 32.765624 0 45.246093zm0 0"
                                style="fill:#fd545a;" />
                        </svg>
                        <div class="item-image">
                            <div class="image">
                                <img src="../../../../assets/img/photo.png" alt="" style="width: 40%; height: auto;">
                            </div>
                        </div>
                        <div class="item-name">
                            <span>{{item.name}}</span>
                            <span>{{item.quantity}}{{item.unit}}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="indexWizardPage === 2" class="box-list-item">
                <div class="box-list-item-hrader">
                    <div (click)="back(true)" class="list-item-Back">
                        <span>ย้อนกลับ</span>
                    </div>

                    <span style="padding: 15px;font-size: 22px;color: black;">จัดสรรรายการลงโพสต์</span>

                    <!-- <div (click)="next(true)" [class.active]="selectNeedItem.length > 0" class="list-item-Next"> -->

                    <div (click)="next(true)" class="list-item-Next">
                        <span>ถัดไป</span>
                    </div>
                </div>
                <div style="padding: 30px;" class="box-list-item-hrader">
                </div>
                <div class="box-list-item-body" [class.list]="true">
                    <div class="list-post" *ngFor="let item of groupsArr[indexItem].posts">
                        <div class="detail">
                            <div class="date">
                                <!-- <span>{{getTypePost(item.posts.type)}}</span> -->
                                <svg class="icon-time" height="8pt" viewBox="0 0 512 512" style="margin: 0px 4px;"
                                    width="8pt" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="m256 512c-141.164062 0-256-114.835938-256-256s114.835938-256 256-256 256 114.835938 256 256-114.835938 256-256 256zm0-480c-123.519531 0-224 100.480469-224 224s100.480469 224 224 224 224-100.480469 224-224-100.480469-224-224-224zm0 0"
                                        fill="#A5A5A6" />
                                    <path
                                        d="m368 394.667969c-4.097656 0-8.191406-1.558594-11.308594-4.695313l-112-112c-3.007812-3.007812-4.691406-7.082031-4.691406-11.304687v-149.335938c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v142.699219l107.308594 107.308594c6.25 6.25 6.25 16.382812 0 22.632812-3.117188 3.136719-7.210938 4.695313-11.308594 4.695313zm0 0 "
                                        fill="#A5A5A6" />
                                </svg>
                                <span>{{item.posts.createdDate | dateFormat}}</span>
                            </div>
                            <span class="detail-h">{{item.posts.title}}</span>
                            <span class="detail-d">{{item.posts.detail}}</span>
                        </div>
                        <div class="item-list"></div>
                        <div class="add-delete"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="box-footer"></div>
    </div>

</div>