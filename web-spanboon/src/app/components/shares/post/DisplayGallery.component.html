<!--
    @license Spanboon Platform v0.1
    (c) 2020-2021 KaoGeek. http://kaogeek.dev
    License: MIT. https://opensource.org/licenses/MIT
    Author:  p-nattawadee <nattawdee.l@absolute.co.th>, Chanachai-Pansailom <chanachai.p@absolute.co.th>, Americaso <treerayuth.o@absolute.co.th>
-->

<div class="div-image-gallery">
    <ng-container *ngFor="let image of gallery; let index = index">
        <ng-container *ngIf="index === 0">
            <display-image class="cover-img" [isLoaded]="image.isLoaded || true"
                [base64]="image.signURL ? image.signURL : (image.imageURL ? apiBaseURL + image.imageURL + '/image' : apiBaseURL + image.galleryBase64 + '/image')"
                [class]="'gallery'" (click)="showDialogGallery(index)"></display-image>
        </ng-container>
    </ng-container>
    <div class="box-sub-image" [ngStyle]="{'margin-top': gallery.length > 1 && !!gallery ? '3pt' : 'unset'}">
        <ng-container *ngFor="let image of gallery; let index = index">
            <ng-container *ngIf="index > 0 && index <= 2">
                <display-image class="sub-list-image" [isLoaded]="image.isLoaded || true"
                    [base64]="image.signURL ? image.signURL : (image.imageURL ? apiBaseURL + image.imageURL + '/image' : apiBaseURL + image.galleryBase64 + '/image')"
                    [class]="'gallery'" (click)="showDialogGallery(index)"></display-image>
            </ng-container>
            <ng-container *ngIf="index === 3">
                <ng-container *ngIf="gallery.length > 4; else elseImageMore">
                    <div class="wrapper-gallery-more" (click)="showDialogGallery(index)">
                        <display-image class="sub-list-image" [isLoaded]="image.isLoaded || true"
                            [base64]="image.signURL ? image.signURL : (image.imageURL ? apiBaseURL + image.imageURL + '/image' : apiBaseURL + image.galleryBase64 + '/image')"
                            [class]="'gallery'"></display-image>
                        <span class="image-more"> +
                            {{gallery.length-4}}
                        </span>
                    </div>
                </ng-container>
                <ng-template #elseImageMore>
                    <display-image class="sub-list-image" [isLoaded]="image.isLoaded || true"
                        [base64]="image.signURL ? image.signURL : (image.imageURL ? apiBaseURL + image.imageURL + '/image' : apiBaseURL + image.galleryBase64 + '/image')"
                        [class]="'gallery'" (click)="showDialogGallery(index)"></display-image>
                </ng-template>
            </ng-container>
        </ng-container>

    </div>
</div>