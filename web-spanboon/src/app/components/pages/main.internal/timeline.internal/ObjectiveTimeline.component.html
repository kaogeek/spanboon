<!--
    @license Spanboon Platform v0.1
    (c) 2020-2021 KaoGeek. http://kaogeek.dev
    License: MIT. https://opensource.org/licenses/MIT
    Author:  p-nattawadee <nattawdee.l@absolute.co.th>, Chanachai-Pansailom <chanachai.p@absolute.co.th>, Americaso <treerayuth.o@absolute.co.th>
-->
<div id="canvas-wrap">
    <canvas id="canvas"></canvas>
    <div class="objective-timeline-body" id="body">
        <svg class="img_objective" xmlns="http://www.w3.org/2000/svg" width="700.899" height="700.899"
            viewBox="10 0 22.899 22.899">
            <g id="mission" transform="translate(0)">
                <path fill="white" id="Path_3205" data-name="Path 3205"
                    d="M4.864,322.8a1.782,1.782,0,0,1,.267-1.475l3.26-4.646L6.552,314.13a.447.447,0,0,0-.726,0L.085,322.093a.447.447,0,0,0,.363.709Z"
                    transform="translate(0 -299.903)" />
                <path fill="white" id="Path_3206" data-name="Path 3206"
                    d="M311.071,9.5V7.156h5.59a.671.671,0,0,0,.57-1.025L316.06,4.249l1.171-1.882a.671.671,0,0,0-.57-1.025h-5.59V.671a.671.671,0,1,0-1.342,0V9.5A.865.865,0,0,1,311.071,9.5Z"
                    transform="translate(-295.877)" />
                <path fill="white" id="Path_3207" data-name="Path 3207"
                    d="M149.512,349.174l-1.6,1.492a.671.671,0,0,1-.915,0l-1.162-1.082-1.161,1.082a.671.671,0,0,1-.915,0l-1.6-1.492-4.616,6.578a.447.447,0,0,0,.366.7h15.855a.447.447,0,0,0,.366-.7Z"
                    transform="translate(-131.312 -333.558)" />
                <path fill="white" id="Path_3208" data-name="Path 3208"
                    d="M260.934,244.4l1.161-1.082a.671.671,0,0,1,.915,0l1.162,1.082,1.292-1.177-2.545-3.626a.447.447,0,0,0-.732,0l-2.545,3.626Z"
                    transform="translate(-248.03 -228.703)" />
            </g>
        </svg>

        <div class="objective-head">
            <div class="top-objective-data">
                <div class="objective">
                    <div class="data">
                        <img class="iconURL" src="{{apiBaseURL+pageObjective.iconURL+'/image'}}" alt="">
                        <div class="data-text">
                            <div class="text">
                                <span class="title">{{pageObjective.title}}</span>
                                <span class="disiption">#{{pageObjective.title}}</span>
                            </div>
                            <div class="score">
                                <div class="score-type">
                                    <span class="title">20</span>
                                    <span class="disiption">การพูดถึง</span>
                                </div>
                                <div class="score-type">
                                    <span class="title">20</span>
                                    <span class="disiption">บอกต่อ</span>
                                </div>
                                <div class="score-type">
                                    <span class="title">20</span>
                                    <span class="disiption">ถูกใจ</span>
                                </div>
                                <div class="score-type">
                                    <span class="title">20</span>
                                    <span class="disiption">แชร์</span>
                                </div>
                            </div>
                            <div class="buttom">
                                <span>กดติดตามสิ่งที่กำลังทำได้ที่นี้</span>
                                <button-follow style="margin-top: 15px;" class="btn-follow" [color]="'#FD545A'"
                                    [border]="'0.7px solid #FD545A'" [bgColor]="'rgb(49 63 64 / 0%)'" [text]="'ติดตาม'">
                                </button-follow>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="objective-owner">
                    <div class="owner">
                        <span class="title">ผู้สร้าง</span>
                        <div class="page">
                            <img class="iconURL" src="{{apiBaseURL+pageOwner.imageURL+'/image'}}" alt="">
                            <div class="disiption">
                                <span>{{pageOwner.name}}</span>
                            </div>
                        </div>
                        <div class="detail">
                            <span class="title">แท็กที่เกี่ยวข้อง</span>
                            <span class="disiption">#โควิด</span>
                        </div>
                        <div class="follow-fullfill">
                            <div class="follow">
                                <div class="text">
                                    <span class="title">ติดตามทั้งหมด</span>
                                    <span class="score"> 0 </span>
                                </div>
                            </div>
                            <div class="fullfill">
                                <div class="text">
                                    <span class="title">ติดตามทั้งหมด</span>
                                    <span class="score"> 0 </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="needs-section">
                <span class="title" *ngIf="objectiveData && objectiveData.needItems.length > 0">สิ่งที่กำลังมองหา</span>
                <needs-card *ngIf="objectiveData && objectiveData.needItems.length > 0"
                    [itemNeeds]="objectiveData.needItems" [isFulfillQuantity]="true" [isFulfill]="true"
                    [isPendingFulfill]="true"
                    [isImage]="objectiveData.gallery && objectiveData.gallery.length > 0 && objectiveData.title === '' ">
                </needs-card>
            </div>
        </div>
        <div class="timeline-data-section">
            <div class="body">
                <div *ngFor="let item of objectiveData? objectiveData.timelines:[]; let index = index"
                    class="strat-section-point">
                    <div class="head">
                        <div class="line"></div>
                        <div class="strat-point" data-aos="fade-up" data-aos-offset="20" data-aos-delay="30"
                            data-aos-duration="500" data-aos-easing="ease-in-out" data-aos-mirror="false"
                            data-aos-once="false" data-aos-anchor-placement="top-center">
                            <span class="title" id="point">{{index === 0 ? 'จุดเริ่มต้น':'พฤษภาคม 2564'}}</span>
                        </div>
                    </div>
                    <div class="card">

                        <div *ngIf="item.type === 'OBJECTIVE_START'" class="objective_start_card">
                            <div class="left" data-aos="fade-up" data-aos-offset="20" data-aos-delay="30"
                                data-aos-duration="500" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                data-aos-once="false" data-aos-anchor-placement="top-center">
                                <div class="body" id="point">
                                    <div *ngIf="item.post.postGallery.length === 0" class="top">
                                        <span class="title">{{item.title}}</span>
                                        <span class="sub_title">{{item.subTitle}}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="right" data-aos="fade-left" data-aos-offset="20" data-aos-delay="30"
                                data-aos-duration="700" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                data-aos-once="false" data-aos-anchor-placement="top-center">
                                <div class="body">
                                    <div *ngIf="item.post.postGallery.length > 0" class="top">
                                        <span class="title">{{item.title}}</span>
                                        <span class="sub_title">{{item.subTitle}}</span>
                                    </div>
                                    <div class="post">
                                        <div class="head">
                                            <div class="type" *ngIf="item.post.type === 'NEEDS'">
                                                <div class="point"></div>
                                                <div class="type_name">
                                                    <span>มองหา</span>
                                                </div>
                                            </div>
                                            <span class="drot">•</span>
                                            <span class="createdDate">
                                                <svg class="icon-time" height="10pt" viewBox="0 0 512 512" width="10pt"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="m256 512c-141.164062 0-256-114.835938-256-256s114.835938-256 256-256 256 114.835938 256 256-114.835938 256-256 256zm0-480c-123.519531 0-224 100.480469-224 224s100.480469 224 224 224 224-100.480469 224-224-100.480469-224-224-224zm0 0"
                                                        fill="black" />
                                                    <path
                                                        d="m368 394.667969c-4.097656 0-8.191406-1.558594-11.308594-4.695313l-112-112c-3.007812-3.007812-4.691406-7.082031-4.691406-11.304687v-149.335938c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v142.699219l107.308594 107.308594c6.25 6.25 6.25 16.382812 0 22.632812-3.117188 3.136719-7.210938 4.695313-11.308594 4.695313zm0 0 "
                                                        fill="black" />
                                                </svg>
                                                {{item.post.createdDate | dateFormat}}
                                            </span>
                                        </div>
                                        <div class="title" [innerHTML]="item.post.title"></div>
                                        <div class="detail" [innerHTML]="item.post.detail"></div>
                                        <div class="buttom">
                                            <div class="botton">
                                                <span>ไปที่โพสต์</span>
                                                <svg style="margin: 0px 10px;" height="15pt" class="icon-time"
                                                    width="15pt" viewBox="0 -22 512 511"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path fill="white"
                                                        d="m512 233.820312-212.777344-233.320312v139.203125h-45.238281c-140.273437 0-253.984375 113.710937-253.984375 253.984375v73.769531l20.09375-22.019531c68.316406-74.851562 164.980469-117.5 266.324219-117.5h12.804687v139.203125zm0 0" />
                                                </svg>
                                            </div>
                                            <div class="score">
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">การพูดถึง</span>
                                                </div>
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">บอกต่อ</span>
                                                </div>
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">ถูกใจ</span>
                                                </div>
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">แชร์</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="item.type === 'OBJECTIVE_NEEDS'" class="objective_needs_card">
                            <div class="left" data-aos="fade-right" data-aos-offset="20" data-aos-delay="30"
                                data-aos-duration="700" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                data-aos-once="false" data-aos-anchor-placement="top-center">
                                <div class="body">
                                    <div class="top">
                                        <span class="title">{{item.title}}</span>
                                        <span class="sub_title">{{item.subTitle}}</span>
                                    </div>
                                    <div class="post">
                                        <div class="head">
                                            <div class="type" *ngIf="item.post.type === 'NEEDS'">
                                                <div class="point"></div>
                                                <div class="type_name">
                                                    <span>มองหา</span>
                                                </div>
                                            </div>
                                            <span class="drot">•</span>
                                            <span class="createdDate">
                                                <svg class="icon-time" height="10pt" viewBox="0 0 512 512" width="10pt"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="m256 512c-141.164062 0-256-114.835938-256-256s114.835938-256 256-256 256 114.835938 256 256-114.835938 256-256 256zm0-480c-123.519531 0-224 100.480469-224 224s100.480469 224 224 224 224-100.480469 224-224-100.480469-224-224-224zm0 0"
                                                        fill="black" />
                                                    <path
                                                        d="m368 394.667969c-4.097656 0-8.191406-1.558594-11.308594-4.695313l-112-112c-3.007812-3.007812-4.691406-7.082031-4.691406-11.304687v-149.335938c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v142.699219l107.308594 107.308594c6.25 6.25 6.25 16.382812 0 22.632812-3.117188 3.136719-7.210938 4.695313-11.308594 4.695313zm0 0 "
                                                        fill="black" />
                                                </svg>
                                                {{item.post.createdDate | dateFormat}}
                                            </span>
                                        </div>
                                        <div class="title" [innerHTML]="item.post.title"></div>
                                        <div class="detail" [innerHTML]="item.post.detail"></div>
                                        <div class="buttom">
                                            <div class="botton">
                                                <span>ไปที่โพสต์</span>
                                                <svg style="margin: 0px 10px;" height="15pt" class="icon-time"
                                                    width="15pt" viewBox="0 -22 512 511"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path fill="white"
                                                        d="m512 233.820312-212.777344-233.320312v139.203125h-45.238281c-140.273437 0-253.984375 113.710937-253.984375 253.984375v73.769531l20.09375-22.019531c68.316406-74.851562 164.980469-117.5 266.324219-117.5h12.804687v139.203125zm0 0" />
                                                </svg>
                                            </div>
                                            <div class="score">
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">การพูดถึง</span>
                                                </div>
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">บอกต่อ</span>
                                                </div>
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">ถูกใจ</span>
                                                </div>
                                                <div class="score-type">
                                                    <span class="title">0</span>
                                                    <span class="disiption">แชร์</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="right" data-aos="fade-up" data-aos-offset="20" data-aos-delay="40"
                                data-aos-duration="500" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                data-aos-once="false" data-aos-anchor-placement="top-center">
                                <div class="body" id="point">
                                    <div class="needs-card">
                                        <div class="item">
                                            <span class="title">สิ่งที่กำลังมองหา</span>
                                            <div class="needs">
                                                <div class="list-needs"
                                                    *ngFor="let item of item.post.needs | slice:0:4; let index = index">
                                                    <div class="needs">
                                                        <img class="img-items" *ngIf="!item.imageURL"
                                                            src="../../../../assets/img/customize_item.svg" alt="">
                                                        <img class="img-items" *ngIf="item.imageURL"
                                                            src="{{apiBaseURL+item.imageURL+'/image'}}">
                                                    </div>
                                                    <div class="needs-data" [class.active]="isFulfill">
                                                        <div [class.active]="isFulfill">
                                                            <div class="needs-data-h">
                                                                <div class="text-h">{{item.name || item.itemName}}</div>
                                                            </div>
                                                            <div class="needs-data-body" [class.active]="isFulfill">
                                                                <div class="unit" [class.active]="isFulfill">
                                                                    <div class="unit-box">
                                                                        <div class="unit-num">
                                                                            <ng-container
                                                                                *ngIf="isPendingFulfill; else elseTemplateQty">
                                                                                <span *ngIf="isFulfillQuantity">
                                                                                    <span
                                                                                        [ngStyle]="{'color': item.fulfillQuantity > item.quantity ? '#fd545a' : '#7AAF67'} ">
                                                                                        {{item.fulfillQuantity |
                                                                                        shortNumber}} /
                                                                                    </span>
                                                                                </span>
                                                                                <span *ngIf="!isFulfill"
                                                                                    [ngStyle]="{'color': isFulfillQuantity ? '#00000080' : '#000000'}">
                                                                                    {{item.quantity | shortNumber}}
                                                                                </span>
                                                                            </ng-container>
                                                                            <ng-template #elseTemplateQty>
                                                                                <span
                                                                                    [ngStyle]="{'color': isFulfillQuantity ? '#00000080' : '#000000'}">
                                                                                    {{item.quantity | shortNumber}}
                                                                                </span>
                                                                            </ng-template>
                                                                        </div>

                                                                        <div class="unit-sub">{{item.unit}}</div>
                                                                    </div>
                                                                </div>
                                                                <ng-container *ngIf="isNeedBoxPost">
                                                                    <div class="unit-bt-box" *ngIf="!isFulfill">
                                                                    </div>
                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                        <div class="fullfill">
                                                            <div class="botton">
                                                                <span>เติมเต็ม</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="item.type === 'OBJECTIVE_INFLUENCER_FULFILL'" class="objective_influencer_fulfill">
                            <div class="body">
                                <div class="left" data-aos="fade-right" data-aos-offset="20" data-aos-delay="30"
                                    data-aos-duration="700" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                    data-aos-once="false" data-aos-anchor-placement="top-center">
                                    <div class="top">
                                        <span class="title">{{item.title}}</span>
                                    </div>
                                </div>
                                <div class="right" id="point" data-aos="fade-up" data-aos-offset="20"
                                    data-aos-delay="30" data-aos-duration="500" data-aos-easing="ease-in-out"
                                    data-aos-mirror="false" data-aos-once="false"
                                    data-aos-anchor-placement="top-center">
                                    <div class="influencer_fulfill">
                                        <div class="influencer_img"
                                            *ngFor="let influencer of item? item.influencers:[]; let index = index">
                                            <img class="img" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                alt="">
                                        </div>
                                        <div class="influencer_img"
                                            *ngFor="let influencer of item? item.influencers:[]; let index = index">
                                            <img class="img" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                alt="">
                                        </div>
                                        <div class="influencer_img"
                                            *ngFor="let influencer of item? item.influencers:[]; let index = index">
                                            <img class="img" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                alt="">
                                        </div>
                                        <div class="influencer_img"
                                            *ngFor="let influencer of item? item.influencers:[]; let index = index">
                                            <img class="img" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                alt="">
                                        </div>
                                        <div class="influencer_img"
                                            *ngFor="let influencer of item? item.influencers:[]; let index = index">
                                            <img class="img" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                alt="">
                                        </div>
                                        <div class="star_svg_bg">
                                            <svg class="starSVG" *ngFor="let influencer of [1,2,3,4,5,6,7,8,9,10]"
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1"
                                                x="0px" y="0px" width="30px" height="30px" viewBox="0 0 512 512"
                                                enable-background="new 0 0 512 512" xml:space="preserve">
                                                <polygon fill="#1D1D1B" stroke="#1D1D1B" stroke-width="37.6152"
                                                    stroke-linecap="round" stroke-linejoin="round"
                                                    stroke-miterlimit="10"
                                                    points="  259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08   29.274,197.007 188.165,173.919 " />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="item.type === 'OBJECTIVE_INFLUENCER'" class="objective_post_liked">
                            <div class="body">
                                <div class="left" data-aos="fade-right" data-aos-offset="20" data-aos-delay="30"
                                    data-aos-duration="700" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                    data-aos-once="false" data-aos-anchor-placement="top-center">
                                    <div class="top">
                                        <span class="title">คนเหล่านี้ ได้เข้ามาพูดคุยใน {{pageObjective.title}}</span>
                                    </div>
                                </div>
                                <div class="right" id="point" data-aos="fade-up" data-aos-offset="20"
                                    data-aos-delay="30" data-aos-duration="500" data-aos-easing="ease-in-out"
                                    data-aos-mirror="false" data-aos-once="false"
                                    data-aos-anchor-placement="top-center">
                                    <div *ngFor="let influencer of item? item.influencers:[]; let index = index"
                                        class="influencers">
                                        <div *ngIf="index === 0||index === 2" class="influencer">
                                            <div class="comment-follow">
                                                <div class="comment">
                                                    <span>{{influencer.comment}}</span>
                                                </div>
                                                <div class="follow">
                                                    <span>{{influencer.count}}</span>
                                                    <svg class="img-action" style="margin: 0px 10px;"
                                                        xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                        viewBox="0 0 56.85 48.58">
                                                        <path class="svg-icon-color-activate" id="Path_3669"
                                                            data-name="Path 3669"
                                                            d="M196.9,74.77h-.05a17.223,17.223,0,0,0-11.07,4,17.029,17.029,0,0,0-10.99-4,17.259,17.259,0,0,0-17.45,17.31c0,15.15,23.76,28.7,26.47,30.2l1.94,1.07,1.95-1.06c2.71-1.48,26.49-14.86,26.49-30.23A17.438,17.438,0,0,0,196.9,74.77Z"
                                                            transform="translate(-157.34 -74.77)" fill="#F8F7F2" />
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="img">
                                                <img class="icon" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                    alt="">
                                            </div>
                                        </div>
                                        <div *ngIf="index === 1||index === 3" class="influencer">
                                            <div class="img">
                                                <img class="icon" src="{{apiBaseURL+influencer.user.imageURL+'/image'}}"
                                                    alt="">
                                            </div>
                                            <div class="comment-follow">
                                                <div class="comment">
                                                    <span>{{influencer.comment}}</span>
                                                </div>
                                                <div class="follow">
                                                    <span>{{influencer.count}}</span>
                                                    <svg class="img-action" xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" style="margin: 0px 10px;"
                                                        viewBox="0 0 56.85 48.58">
                                                        <path class="svg-icon-color-activate" id="Path_3669"
                                                            data-name="Path 3669"
                                                            d="M196.9,74.77h-.05a17.223,17.223,0,0,0-11.07,4,17.029,17.029,0,0,0-10.99-4,17.259,17.259,0,0,0-17.45,17.31c0,15.15,23.76,28.7,26.47,30.2l1.94,1.07,1.95-1.06c2.71-1.48,26.49-14.86,26.49-30.23A17.438,17.438,0,0,0,196.9,74.77Z"
                                                            transform="translate(-157.34 -74.77)" fill="#F8F7F2" />
                                                    </svg>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="item.type === 'OBJECTIVE_POST_LIKED'" class="objective_post_liked"
                            data-aos="fade-up" data-aos-offset="20" data-aos-delay="30" data-aos-duration="500"
                            data-aos-easing="ease-in-out" data-aos-mirror="false" data-aos-once="false"
                            data-aos-anchor-placement="top-center">
                            <div class="body">
                                COMING SOON
                            </div>
                        </div>

                        <div *ngIf="item.type === 'OBJECTIVE_LASTEST'" class="objective_lastest_card">
                            <div class="body">
                                <div class="top">
                                    <span class="title">{{item.title}}</span>
                                </div>
                                <div class="posts">
                                    <div class="post" data-aos="fade-up" data-aos-offset="20" data-aos-delay="70"
                                        data-aos-duration="500" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                        data-aos-once="false" data-aos-anchor-placement="top-center"
                                        *ngFor="let post of item.posts; let index = index">
                                        <post-data [itemPost]="post">
                                        </post-data>
                                    </div>
                                    <div class="post" data-aos="fade-up" data-aos-offset="20" data-aos-delay="70"
                                        data-aos-duration="500" data-aos-easing="ease-in-out" data-aos-mirror="false"
                                        data-aos-once="false" data-aos-anchor-placement="top-center"
                                        *ngFor="let post of item.posts; let index = index">
                                        <post-data [itemPost]="post">
                                        </post-data>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>