<!--
    @license Spanboon Platform v0.1
    (c) 2020-2021 KaoGeek. http://kaogeek.dev
    License: MIT. https://opensource.org/licenses/MIT
    Author:  p-nattawadee <nattawdee.l@absolute.co.th>, Chanachai-Pansailom <chanachai.p@absolute.co.th>, Americaso <treerayuth.o@absolute.co.th>
-->

<ng-container *ngIf="isLogin(); else elseUser">
    <button mat-button [matMenuTriggerFor]="beforeMenu" class="log-header">
        <ng-container
            *ngIf="userImage !== undefined && userImage !== null && userImage.imageURL && userImage.imageURL !== undefined && userImage.imageURL !== null && userImage.imageURL !== '' ; else elseImage">
            <div class="menu-user">
                <img class="image-profile" src="{{userImage.imageURL}}" alt="">
            </div>
        </ng-container>
        <ng-template #elseImage>
            <div class="menu-user displayName"
                *ngIf="userImage !== undefined && userImage !== null && userImage.displayName && userImage.displayName !== undefined && userImage.displayName !== null && userImage.displayName !== ''">
                <span class="donator">
                    {{userImage.displayName | slice: 0:1  }}
                </span>
            </div>
        </ng-template>
    </button>
    <mat-menu #beforeMenu="matMenu" xPosition="before" class="menu-set" backdropClass="profile-sub-menu">
        <div class="header-menu-profile">
            <div class="profile-header" (click)="$event.stopPropagation()">
                <ng-container
                    *ngIf="userImage !== undefined && userImage !== null && userImage.imageURL && userImage.imageURL !== undefined && userImage.imageURL !== null && userImage.imageURL !== ''; else elseImageTo">
                    <img class="image-profile_z" src="{{userImage.imageURL}}" alt="">
                </ng-container>
                <ng-template #elseImageTo>
                    <div class="menu-user_z"
                        *ngIf="userImage !== undefined && userImage !== null && userImage.displayName && userImage.displayName !== undefined && userImage.displayName !== null && userImage.displayName !== ''">
                        <span>{{userImage.displayName | slice: 0:1  }}</span>
                    </div>
                </ng-template>
                <div class="profile-detail">
                    <div class="profile-name">
                        {{userImage.displayName}}
                    </div>
                    <div class="profile-name-eng">
                        @{{userImage.displayName}}
                    </div>
                    <div class="header-follow">

                        <div class="following">
                            {{userImage.followings}} <span>กำลังติดตาม</span>
                        </div>
                        <span class="dote">·</span>
                        <div class="followers">
                            {{userImage.followers}} <span>ถูกติดตาม</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="list-setting">
                <div class="setting" [class.active-link]="isActive" (click)="getLinkProfile()">
                    <svg class="icon" id="social-media" xmlns="http://www.w3.org/2000/svg" width="19.257"
                        height="19.257" viewBox="0 0 19.257 19.257">
                        <g id="Group_403" data-name="Group 403" transform="translate(0 13.855)">
                            <g id="Group_402" data-name="Group 402">
                                <circle id="Ellipse_155" data-name="Ellipse 155" cx="2.698" cy="2.698" r="2.698"
                                    fill="#a2a2a2" />
                            </g>
                        </g>
                        <g id="Group_406" data-name="Group 406">
                            <g id="Group_405" data-name="Group 405">
                                <g id="Group_404" data-name="Group 404">
                                    <path id="Path_266" data-name="Path 266"
                                        d="M0,120.64v3.5a8.753,8.753,0,0,1,8.75,8.75h3.5A12.256,12.256,0,0,0,0,120.64Z"
                                        transform="translate(0 -113.641)" fill="#a2a2a2" />
                                    <path id="Path_267" data-name="Path 267"
                                        d="M0,0V3.5A15.755,15.755,0,0,1,15.754,19.257h3.5A19.262,19.262,0,0,0,0,0Z"
                                        fill="#a2a2a2" />
                                </g>
                            </g>
                        </g>
                    </svg>
                    <div class="name">
                        ไทมไลน์
                    </div>
                </div>
                <div class="setting" (click)="settingProfile()">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="16.334" height="16.773"
                        viewBox="0 0 16.334 16.773">
                        <g id="tools-and-utensils" transform="translate(-6.71)" opacity="0.34">
                            <g id="Group_401" data-name="Group 401" transform="translate(6.71)">
                                <path id="Path_265" data-name="Path 265"
                                    d="M22.761,10.225,21.219,9.019a6.071,6.071,0,0,0,.036-.633,5.887,5.887,0,0,0-.036-.633l1.543-1.206a.756.756,0,0,0,.182-.963l-1.6-2.774a.743.743,0,0,0-.927-.333l-1.819.73A6.237,6.237,0,0,0,17.5,2.573L17.226.643A.742.742,0,0,0,16.485,0H13.27a.74.74,0,0,0-.739.637l-.277,1.937a6.43,6.43,0,0,0-1.09.634L9.339,2.475a.758.758,0,0,0-.92.328L6.813,5.581a.751.751,0,0,0,.182.968L8.537,7.754a5.53,5.53,0,0,0,0,1.266L6.994,10.226a.756.756,0,0,0-.182.963l1.6,2.774a.742.742,0,0,0,.927.333l1.819-.73a6.292,6.292,0,0,0,1.092.634l.277,1.929a.742.742,0,0,0,.741.644h3.215a.741.741,0,0,0,.74-.637L17.5,14.2a6.46,6.46,0,0,0,1.09-.635l1.824.732a.751.751,0,0,0,.274.052.738.738,0,0,0,.646-.379l1.61-2.789A.754.754,0,0,0,22.761,10.225Zm-7.883.957a2.8,2.8,0,1,1,2.8-2.8A2.8,2.8,0,0,1,14.878,11.182Z"
                                    transform="translate(-6.71)" />
                            </g>
                        </g>
                    </svg>
                    <div class="name">
                        จัดการบัญชี
                    </div>
                </div>
                <div class="setting" (click)="notificationProfile()">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="18.722" height="20.424"
                        viewBox="0 0 18.722 20.424">
                        <g id="musical-instrument" transform="translate(0 0)">
                            <path id="Path_261" data-name="Path 261"
                                d="M358.529,24.617a.851.851,0,0,1-.851-.851,8.879,8.879,0,0,0-2.617-6.319.851.851,0,0,1,1.2-1.2,10.567,10.567,0,0,1,3.115,7.522.851.851,0,0,1-.851.851Zm0,0"
                                transform="translate(-340.658 -15.357)" fill="#a2a2a2" />
                            <path id="Path_262" data-name="Path 262"
                                d="M.851,24.617A.851.851,0,0,1,0,23.767a10.568,10.568,0,0,1,3.115-7.522.851.851,0,1,1,1.2,1.2A8.877,8.877,0,0,0,1.7,23.767a.851.851,0,0,1-.851.851Zm0,0"
                                transform="translate(0 -15.357)" fill="#a2a2a2" />
                            <path id="Path_263" data-name="Path 263"
                                d="M37.824,14.393A5.7,5.7,0,0,1,35.8,10.032V7.659a5.962,5.962,0,0,0-5.106-5.889V.851a.851.851,0,0,0-1.7,0v.919a5.961,5.961,0,0,0-5.106,5.889v2.373A5.706,5.706,0,0,1,21.853,14.4a1.489,1.489,0,0,0,.968,2.62H36.863a1.489,1.489,0,0,0,.961-2.627Zm0,0"
                                transform="translate(-20.481)" fill="#a2a2a2" />
                            <path id="Path_264" data-name="Path 264"
                                d="M159.415,450.553A3.2,3.2,0,0,0,162.542,448h-6.253A3.2,3.2,0,0,0,159.415,450.553Zm0,0"
                                transform="translate(-150.055 -430.129)" fill="#a2a2a2" />
                        </g>
                    </svg>
                    <div class="name">
                        การแจ้งเตือน
                    </div>
                </div>
                <div class="setting" (click)="clickLogout();">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="17.437" height="15.257"
                        viewBox="0 0 17.437 15.257">
                        <g id="signs" transform="translate(0 -31.998)" opacity="0.34">
                            <g id="Group_398" data-name="Group 398" transform="translate(0 33.088)">
                                <g id="Group_397" data-name="Group 397">
                                    <path id="Path_259" data-name="Path 259"
                                        d="M11.988,71.664V75.99H2.18V66.182H5.449V64H1.09A1.09,1.09,0,0,0,0,65.092V77.079a1.089,1.089,0,0,0,1.09,1.09H13.077a1.089,1.089,0,0,0,1.09-1.09V71.664Z"
                                        transform="translate(0 -64.002)" />
                                </g>
                            </g>
                            <g id="Group_400" data-name="Group 400" transform="translate(4.359 31.998)">
                                <g id="Group_399" data-name="Group 399">
                                    <path id="Path_260" data-name="Path 260"
                                        d="M140.859,35.377,136.5,32.108a.545.545,0,0,0-.872.436v1.635h-1.635A6,6,0,0,0,128,40.172a.545.545,0,0,0,1.032.244l.129-.256a4.877,4.877,0,0,1,4.386-2.712h2.081v1.635a.545.545,0,0,0,.872.436l4.359-3.269a.545.545,0,0,0,0-.872Z"
                                        transform="translate(-128 -31.998)" />
                                </g>
                            </g>
                        </g>
                    </svg>
                    <div class="name">
                        ออกจากระบบ
                    </div>
                </div>
            </div>
        </div>
    </mat-menu>
</ng-container>
<ng-template #elseUser>
    <div class="not-log">
        <svg class="profile" [routerLink]="'/login'" [routerLinkActive]="['active-link']"
            [class.active-link-user]="isRegister()" id="user_3_" data-name="user (3)" xmlns="http://www.w3.org/2000/svg"
            width="30.332" height="36.356" viewBox="0 0 30.332 36.356">
            <path id="Path_136" data-name="Path 136"
                d="M95.788,17.513a8.472,8.472,0,0,0,6.191-2.565,8.473,8.473,0,0,0,2.565-6.191,8.474,8.474,0,0,0-2.565-6.191,8.754,8.754,0,0,0-12.382,0,8.473,8.473,0,0,0-2.565,6.191A8.473,8.473,0,0,0,89.6,14.948,8.474,8.474,0,0,0,95.788,17.513Zm0,0"
                transform="translate(-80.852 0)" fill="#464646" />
            <path id="Path_137" data-name="Path 137"
                d="M30.258,257.711a21.629,21.629,0,0,0-.295-2.3,18.1,18.1,0,0,0-.565-2.31,11.407,11.407,0,0,0-.949-2.154,8.126,8.126,0,0,0-1.432-1.866,6.312,6.312,0,0,0-2.057-1.292,7.107,7.107,0,0,0-2.626-.475,2.665,2.665,0,0,0-1.423.6c-.427.278-.926.6-1.483.956a8.5,8.5,0,0,1-1.918.845,7.449,7.449,0,0,1-4.693,0,8.472,8.472,0,0,1-1.917-.845c-.552-.353-1.051-.674-1.484-.956a2.661,2.661,0,0,0-1.423-.6,7.1,7.1,0,0,0-2.625.476,6.308,6.308,0,0,0-2.057,1.292,8.129,8.129,0,0,0-1.431,1.866A11.431,11.431,0,0,0,.932,253.1a18.144,18.144,0,0,0-.565,2.309,21.553,21.553,0,0,0-.295,2.3c-.048.7-.073,1.418-.073,2.147a6.037,6.037,0,0,0,1.793,4.567,6.454,6.454,0,0,0,4.62,1.685H23.918a6.453,6.453,0,0,0,4.62-1.685,6.034,6.034,0,0,0,1.793-4.568c0-.733-.025-1.455-.074-2.147Zm0,0"
                transform="translate(0 -229.755)" fill="#464646" />
        </svg>
    </div>
</ng-template>