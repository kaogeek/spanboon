<!--
    @license Spanboon Platform v0.1
    (c) 2020-2021 KaoGeek. http://kaogeek.dev
    License: MIT. https://opensource.org/licenses/MIT
    Author:  p-nattawadee <nattawdee.l@absolute.co.th>, Chanachai-Pansailom <chanachai.p@absolute.co.th>, Americaso <treerayuth.o@absolute.co.th>
-->
<div *ngIf="isLoding" class="loding">
    <div class="top">
        <div class="top_for_loding" *ngFor="let number of [0,1 ]">
            <Preload-card [isShowCard1]="true" [isShowCard2]="false">
            </Preload-card>
        </div>
    </div>
    <div class="buttom">
        <div class="buttom_for_loding" *ngFor="let number of [0,1,2,3 ]">
            <Preload-card [isShowCard1]="true" [isShowCard2]="false">
            </Preload-card>
        </div>
    </div>
</div>

<div class="home_page_v2" [class.hide]="!isLoding">
    <div class="hoem_page_body">

        <!-- ///////////////////////// -->

        <div class="events_tag_top">
            <div class="left">
                <div class="text_h">
                    <span class="text">มาใหม่ :</span>
                </div>
                <div class="tag_list">
                    <span class="tag" (click)="clickDataSearch(item)"
                        *ngFor="let item of emergencyEventsArrTitle | slice:0:3; let i=index">{{item}}</span>
                </div>
                <div class="tag_list_moblie">
                    <span class="tag" (click)="clickDataSearch(item)"
                        *ngFor="let item of emergencyEventsArrTitle | slice:0:2; let i=index">{{item}}</span>
                </div>
            </div>
            <div class="right">
                <span class="text">มาแรง :</span>
                <div class="tag_list">
                    <a class="tag" (click)="clickDataSearch(item)"
                        *ngFor="let item of emergencyEventsArrTitle | slice:0:3; let i=index">{{item}}</a>
                </div>
            </div>
        </div>

        <!-- ///////////////////////// -->

        <div class="events_top" [class.full]="!isDoing">
            <div class="left" [class.full]="!isDoing">
                <card-contant-home [eventCard]='true' [isData]="isDoing" [eventData]='emergencyEvents'>
                </card-contant-home>
            </div>
            <div class="right" [class.dis]="!isDoing">
                <div class="tagCardRight">
                    <card-contant-home [tagCard]='true' [tagCardIsOpenRight]='true' [tagData]='doingEventsNo2'>
                    </card-contant-home>
                </div>
                <div class="tagCard">
                    <card-contant-home [tagCard]='true' [tagData]='doingEventsNo1'></card-contant-home>
                    <card-contant-home style="margin-left: 10px;" [tagCard]='true' [tagData]='doingEventsNo3'>
                    </card-contant-home>
                </div>
            </div>
        </div>

        <!-- ///////////////////////// -->


        <div class="around_section" *ngIf="aroundSectionModels">
            <div class="top fix-hompage-bar">
                <div class="text_svg">
                    <div class="text">
                        <span class="title hompage-title">{{aroundSectionModels.title}}</span>
                        <span class="subtitle">{{aroundSectionModels.subtitle}}</span>
                    </div>
                </div>
            </div>
            <div class="body">
                <div class="card">
                    <post-swiper-card [isObjective]="'true'" (clickEventA)="clickDataSearchTodo($event)"
                        [isFulfillQuantity]="true" [isFulfill]="'true'" [keyItem]='["iconUrl"]'
                        [itemNeeds]="aroundSectionModels.contents">
                    </post-swiper-card>
                </div>
            </div>
        </div>

        <div class="needs_section" *ngIf="needsSectionModels">
            <div class="top fix-hompage-bar">
                <span class="title hompage-title">{{needsSectionModels.title}}</span>
                <div class="line"></div>
                <div *ngIf="isLodingMore" class="spinner">
                    <spinners></spinners>
                </div>
                <a *ngIf="!isLodingMore && needsSectionModels.contents.length > 3" class="more"
                    (click)="getMore(needsSectionModels.contents.length,needsSectionModels.type)">ดูเพิ่มเติม</a>
            </div>
            <div class="body">
                <div class="isDesktop" *ngFor="let dataViewSection of needsSectionModels.contents;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [largeCard]='true' [keyObjArr]='["coverPageUrl"]'
                        [postData]='dataViewSection'>
                    </card-contant-home>
                </div>
                <div class="isMobile" *ngFor="let dataViewSection of needsSectionModels.contents;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [largeCard]='true' [keyObjArr]='["coverPageUrl"]'
                        [postData]='dataViewSection'>
                    </card-contant-home>
                </div>
                <div class="footer_mobile" *ngIf="!isLodingMore && needsSectionModels.contents.length > 3">
                    <span>ยังมี {{needsSectionModels.title}} ในตอนนี้อีกมากมาย</span>
                </div>
                <div class="footer_mobile_button" *ngIf="!isLodingMore && needsSectionModels.contents.length > 3">
                    <div *ngIf="isLodingMore">
                        <spinners></spinners>
                    </div>
                    <spanboon-button *ngIf="!isLodingMore"
                        (click)="getMore(needsSectionModels.contents.length,needsSectionModels.type)"
                        [text]="'ดูเพิ่มเติม'" [bgColor]="'white'" [color]="'rgba(253, 84, 84, 0.95)'" [radius]="'5px'"
                        [border]="'rgba(253, 84, 84, 0.95) 1px solid'"></spanboon-button>
                </div>
            </div>
        </div>

        <div class="rated_section" *ngIf="lookingSectionModels">
            <div class="top fix-hompage-bar">
                <span class="title hompage-title">{{lookingSectionModels.title}}</span>
                <div class="line"></div>
                <div *ngIf="isLodingMore" class="spinner">
                    <spinners></spinners>
                </div>
                <a *ngIf="!isLodingMore && lookingSectionModels.contents.length > 4" class="more"
                    (click)="getMore(lookingSectionModels.contents.length,lookingSectionModels.type)">ดูเพิ่มเติม</a>
            </div>
            <div class="body">
                <div class="isDesktop" *ngFor="let dataViewSection of lookingSectionModels.contents;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [mediumCard]='true'
                        [keyObjArr]='["coverPageUrl"]' [postData]='dataViewSection'></card-contant-home>
                </div>
                <div class="isMobile" *ngFor="let dataViewSection of lookingSectionModels.contents;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [mediumCard]='true'
                        [keyObjArr]='["coverPageUrl"]' [postData]='dataViewSection'></card-contant-home>
                </div>
                <div class="footer_mobile" *ngIf="!isLodingMore && lookingSectionModels.contents.length > 4">
                    <span (click)="getMore(lookingSectionModels.contents.length,lookingSectionModels.type)">ยังมี
                        {{lookingSectionModels.title}} ในตอนนี้อีกมากมาย</span>
                </div>
                <div class="footer_mobile_button" *ngIf="!isLodingMore && lookingSectionModels.contents.length > 4">
                    <div *ngIf="isLodingMore">
                        <spinners></spinners>
                    </div>
                    <spanboon-button *ngIf="!isLodingMore" [text]="'ดูเพิ่มเติม'" [bgColor]="'white'"
                        [color]="'rgba(253, 84, 84, 0.95)'" [radius]="'5px'"
                        [border]="'rgba(253, 84, 84, 0.95) 1px solid'"></spanboon-button>
                </div>
            </div>
        </div>

        <div class="other_section" *ngIf="viewSectionModels">
            <div class="top fix-hompage-bar">
                <span class="title hompage-title">{{viewSectionModels.title}}</span>
                <div class="line"></div>
                <div *ngIf="isLodingMore" class="spinner">
                    <spinners></spinners>
                </div>
                <a *ngIf="!isLodingMore && viewSectionModels.contents.length > 3" class="more"
                    (click)="getMore(viewSectionModels.contents.length,viewSectionModels.type)">ดูเพิ่มเติม</a>
            </div>
            <div class="body">
                <div class="isDesktop" *ngFor="let dataViewSection of viewSectionModels.contents;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [mediumCard]='true'
                        [keyObjArr]='["coverPageUrl"]' [postData]='dataViewSection'></card-contant-home>
                </div>
                <div class="isMobile" *ngFor="let dataViewSection of viewSectionModels.contents;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [mediumCard]='true'
                        [keyObjArr]='["coverPageUrl"]' [postData]='dataViewSection'></card-contant-home>
                </div>
                <div *ngIf="isLodingMore" style="width: 100%; margin: 20px;display: flex;">
                    <div style="width: 30%; margin-right: 15px;" *ngFor="let number of [0,1,2,3 ]">
                        <Preload-card [isShowCard1]="true" [isShowCard2]="false">
                        </Preload-card>
                    </div>
                </div>
                <div class="footer_mobile" *ngIf="!isLodingMore && viewSectionModels.contents.length > 3">
                    <span>ยังมี {{viewSectionModels.title}} ในตอนนี้อีกมากมาย</span>
                </div>
                <div class="footer_mobile_button" *ngIf="!isLodingMore && viewSectionModels.contents.length > 3">
                    <spanboon-button *ngIf="!isLodingMore"
                        (click)="getMore(viewSectionModels.contents.length,viewSectionModels.type)"
                        [text]="'ดูเพิ่มเติม'" [bgColor]="'white'" [color]="'rgba(253, 84, 84, 0.95)'" [radius]="'5px'"
                        [border]="'rgba(253, 84, 84, 0.95) 1px solid'"></spanboon-button>
                </div>
            </div>
        </div>

        <div class="other_section" [class.dis]="item.title === ''"
            *ngFor=" let item of sectionModels| slice:0:1;let index = index">
            <div class="top fix-hompage-bar">
                <span class="title hompage-title">{{item.title}}</span>
                <div class="line"></div>
                <!-- <a class="more">ดูเพิ่มเติม</a> -->
            </div>
            <div class="body">
                <div class="isDesktop" *ngFor="let dataViewSection of item.contents| slice:0:4;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [mediumCard]='true' [keyObjArr]='["coverImage"]'
                        [postData]='dataViewSection'></card-contant-home>
                </div>
                <div class="isMobile" *ngFor="let dataViewSection of item.contents| slice:0:3;let index = index">
                    <card-contant-home (clickEvent)="testCrad($event)" [mediumCard]='true' [keyObjArr]='["coverImage"]'
                        [postData]='dataViewSection'></card-contant-home>
                </div>
                <!-- <div class="footer_mobile">
                    <span>ยังมี {{item.title}} ในตอนนี้อีกมากมาย</span>
                </div> -->
            </div>
        </div>

        <div class="around_section" *ngIf="postSectionModel">
            <div class="top" fix-hompage-bar>
                <div class="text_svg">
                    <div class="text">
                        <span class="title hompage-title">{{postSectionModel.title}}</span>
                        <span class="subtitle">{{postSectionModel.subtitle}}</span>
                    </div>
                </div>
            </div>
            <div class="body">
                <div class="card">
                    <post-swiper-card [isFulfillQuantity]="true" (clickEventA)="testCrad($event)" [isFulfill]="'true'"
                        [keyItem]='["coverPageUrl"]' [itemNeeds]="postSectionModel.contents">
                    </post-swiper-card>
                </div>
            </div>
        </div>

    </div>
</div>